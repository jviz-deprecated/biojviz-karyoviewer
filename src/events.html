<!--
@license
Copyright (c) 2016 The Jviz Project Authors. All rights reserved.
The Jviz Project is under the MIT License. See https://github.com/jviz/jviz/blob/dev/LICENSE
-->
<script>

//Register events
jviz_karyoviewer.on = function(name, listener)
{
  //Register the event
  return this._events.add(name, listener);
};

//Resize event
jviz_karyoviewer.__event_resize = function()
{
  //Set the canvas width
  //this._canvas.el.width(this._width);

  //Resize the canvas element
  this.$.canvas.resize();

  //Save the full width
  this._width = jviz.dom.width(this.$.canvas);

  //Save the full height
  //this._height = jviz.dom.height(this.$.canvas);

  //Set to resize the block object
  this._block.resized = false;

  //Set to resize the chromosomes data
  this._chromosomes.resized = false;

  //Set to resize the features data
  this._features.resized = false;
};

//Leave event
jviz_karyoviewer.__event_leave = function(x, y)
{
  //Reset the actual block
  this._over.block.actual = false;

  //Clear the shadow
  //this.__shadow_clear();
};

//Click down event
jviz_karyoviewer.__event_down = function(x, y)
{
  //Check if label is active
  if(this._label.active === true && this._label.visible === true && this._features.clickable === true)
  {
    //Check if user has clicked on a label
    return this.__label_click(x, y);
  }

  /*
  //Check for no chromosome
  if(this._over.chromosome.actual !== false){ return; }

  //Get the actual chromosome
  var chr = this._chromosomes.list[this._over.chromosome.actual];

  //Emit the click on a chromosome
  return this._events.emit('click:chromosome', chr.name, this._over.chromosome.actual);
  */

  //Check for chromosome
  if(this._over.block.actual !== false)
  {
    //Get the actual chromosome
    var chr = this._chromosomes.list[this._over.block.actual];

    //Emit the click on a chromosome
    return this._events.emit('click:chromosome', chr.name, this._over.block.actual);
  }
};

//Move event
jviz_karyoviewer.__event_move = function(x, y)
{
  //Check the move
  if(this._over.move === false){ this._over.move = true; return; }

  //Change the move
  this._over.move = false;

  //Get the actual block
  this._over.block.actual = this.__over_block(x, y);

  //Get the actual chromosome
  this._over.chromosome.actual = this.__over_chromosome(x, y);

  //Draw the label
  this.__label_draw(x, y);

  //Draw the shadow
  this.__shadow_draw();

  //Check the cursor
  //if(this._over.chromosome.actual === false){ return jviz.cursor.remove('pointer'); }
  //if(this._over.chromosome.actual === false){ return; }

  //Add the pointer cursor
  //jviz.cursor.set('pointer');
};

//Up event
jviz_karyoviewer.__event_up = function(x, y)
{

};

</script>